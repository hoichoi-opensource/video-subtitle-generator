#!/bin/bash

set -e

# Ensure we're in the correct directory
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
cd "$SCRIPT_DIR"

# Check if virtual environment exists
if [[ "$VIRTUAL_ENV" == "" ]]; then
    if [ -d "venv" ]; then
        source venv/bin/activate
    else
        echo "‚ùå Virtual environment not found. Please run ./install.sh first."
        exit 1
    fi
fi

# Create necessary directories
mkdir -p output input temp jobs logs chunks subtitles

# Run the Python application
python3 main.py "$@"
